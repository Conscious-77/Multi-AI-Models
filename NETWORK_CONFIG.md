# 网络配置说明

## 智能网络环境检测

本项目支持智能网络环境检测，能够自动选择合适的连接方式：

### 🏠 在家使用VPN
- 系统会自动检测到需要代理
- 自动使用配置的代理服务器
- 无需手动配置

### 🏢 在公司直接连接
- 系统会自动检测到可以直接访问外网
- 自动使用直接连接模式
- 无需手动配置

## 环境变量配置（可选）

如果需要强制使用某种模式，可以设置以下环境变量：

### 强制使用代理模式
```bash
export FORCE_PROXY=true
export PROXY_URL=http://127.0.0.1:7890
```

### 强制使用直接连接模式
```bash
export FORCE_DIRECT=true
```

### 自定义代理地址
```bash
export PROXY_URL=http://your-proxy-server:port
```

## 启动脚本配置

在 `start.sh` 中，你可以根据需要修改：

```bash
# 在家使用VPN
export FORCE_PROXY=true
export PROXY_URL=http://127.0.0.1:7890

# 在公司直接连接
export FORCE_DIRECT=true

# 自动检测（推荐）
# 不设置任何网络相关环境变量
```

## 工作原理

1. **启动时检测**：服务器启动时会自动测试网络连接
2. **智能选择**：根据测试结果自动选择最佳连接方式
3. **实时日志**：在控制台显示当前使用的连接模式
4. **动态切换**：支持通过环境变量强制指定模式

## 故障排除

### 如果自动检测失败
1. 检查网络连接
2. 检查代理服务器是否运行
3. 使用环境变量强制指定模式

### 查看当前连接模式
启动后查看控制台日志，会显示：
- 🔍 检测网络环境...
- ✅ 检测到直接网络连接，无需代理
- 或
- ✅ 代理连接成功，使用代理模式

